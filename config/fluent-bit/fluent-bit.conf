[SERVICE]
    Flush        1
    Daemon       off
    Log_Level    info
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020

[INPUT]
    Name              tail
    Path              /var/log/legal-ai/**/*.log
    Tag               legal-ai.logs
    Refresh_Interval  5

[INPUT]
    Name              tail
    Path              /var/log/legal-ai/**/*.jsonl
    Tag               legal-ai.audit
    Refresh_Interval  5

# Add service information for better categorization
[FILTER]
    Name        modify
    Match       legal-ai.*
    Add         log_source fluent-bit
    Add         service legal-ai

[OUTPUT]
    Name        http
    Match       legal-ai.*
    Host        victorialogs
    Port        9428
    URI         /insert/jsonline?_stream_fields=service,log_source&_msg_field=log&_time_field=@timestamp
    Format      json_lines 